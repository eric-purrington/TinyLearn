<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.0/css/bootstrap.min.css" integrity="sha384-9aIt2nRpC12Uk9gS9baDl411NQApFmC26EwAOH8WgZl5MYYxFfc+NcPb1dKGj7Sk" crossorigin="anonymous">
    <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.8.1/css/all.css" integrity="sha384-50oBUHEmvpQ+1lW4y57PTFmhCaXp0ML5d60M1M7uH2+nqUivzIebhndOJK28anvf" crossorigin="anonymous">
    <link rel="stylesheet" href="./stylesheets/style.css" type="text/css"/>
    <title>TinyLearn</title>
    <script src="https://code.jquery.com/jquery.js"></script>
    <script src="./js/tinylearn.js"></script>
</head>
<body>
    <nav class="navbar navbar-default">
        <div class="container-fluid">
            <div class="navbar-header">
                <img src="assets/book.png" alt="Book" width="70" height="70" />
                <img src="assets/tinylearn.png" alt="TinyLearn" width="120" height="50" />
            </div>
            <div>
                <h2>Welcome <span class="username"></span>!</h2>
            </div>
            <div>
                <a class="navbar-brand" href="/">Home</a>
                <a class="navbar-brand" href="/mylearns">MyLearns</a>
                <a class="navbar-brand" href="/about">About</a>
                <a class="navbar-brand" href="/logout">Logout</a>
            </div>
        </div>
    </nav>
    <div><i class="fas fa-star" id="1"></i><i class="fas fa-star" id="2"></i><i class="fas fa-star" id="3"></i><i class="fas fa-star" id="4"></i><i class="fas fa-star" id="5"></i></div>
    <div class="container my-5">
        <div class="row">
            <div class="col">
                <div class="card">
                    <div class="card-header text-center">
                        <h1>Check out your past learns!</h1>
                        <img src="./assets/red-squiggle.png" class="center" alt="underline" width="450" height="45"/>              
                    </div>
                    <div class="card-body big-bg">
                        <div class="row">
                            {{#each pages}}
                            <div class="col-sm-3">
                                <div class="card myLearnsCard" id="{{dataValues.name}}">
                                    <div class="card-header text-center">
                                        <i class="fas fa-thumbtack"></i><i class="fa fa-trash" id="{{dataValues.id}}"></i><h4>{{dataValues.name}}</h4>
                                        <a href="https://en.wikipedia.org/wiki/{{dataValues.name}}" target="_blank">Learn more!</a>
                                    </div>
                                </div>
                            </div>
                            {{/each }}
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <div class="testImg">sadfsadfsdafsadfsadfdsa</div>
    <script>
    // let url = "https://en.wikipedia.org/w/api.php";
    // $(".testImg").on("click", function() {
    //     var params = {
    // action: "query",
    // format: "json",
    // prop: "categories",
    // titles: "tips",
    // cllimit: "100"
    //     };

        $(".fa-star").on("click", function() {
            console.log($(this));
            const id = parseInt($(this).attr("id"));
            console.log(typeof id);
            switch (id) {
      case 5:
        $(".fa-star").addClass("checked");
        break;
      case 4:
        $("#5").removeClass("checked");
        $("#4").addClass("checked");
        $("#3").addClass("checked");
        $("#2").addClass("checked");
        $("#1").addClass("checked");
        break;
      case 3:
        $("#5").removeClass("checked");
        $("#4").removeClass("checked");
        $("#3").addClass("checked");
        $("#2").addClass("checked");
        $("#1").addClass("checked");
        break;
      case 2:
        $("#5").removeClass("checked");
        $("#4").removeClass("checked");
        $("#3").removeClass("checked");
        $("#2").addClass("checked");
        $("#1").addClass("checked");
        break;
      case 1:
        $("#5").removeClass("checked");
        $("#4").removeClass("checked");
        $("#3").removeClass("checked");
        $("#2").removeClass("checked");
        $("#1").addClass("checked");
        break;
    }
        })

    // url = url + "?origin=*";
    // Object.keys(params).forEach(function(key){url += "&" + key + "=" + params[key];});

    //     $.ajax({
    //       url: url,
    //       method: "GET"
    //     }).then(response => {
    //         console.log(response);
    //         const possibleError = response.query.pages[0];
    //   // eslint-disable-next-line eqeqeq
    //   if (possibleError == null) {
    //     console.log(
    //       `We're sorry, but ${params.titles} isn't a valid category name.`
    //     );
    //     // eslint-disable-next-line no-else-return
    //   } else {
    //     console.log(`${params.titles} added to database.`);
    //   }
    //         const pageId = Object.keys(response.query.pages)[0];
    //         let randomCat = Math.floor(
    //     Math.random() * response.query.pages[pageId].categories.length
    //   );
    //   let newCategoryToPost = response.query.pages[pageId].categories[randomCat].title;
    //   while (
    //     newCategoryToPost.includes("Wikipedia") ||
    //     newCategoryToPost.includes("Articles") ||
    //     newCategoryToPost.includes("articles") ||
    //     newCategoryToPost.includes("Pages") ||
    //     newCategoryToPost.includes("pages") ||
    //     newCategoryToPost.includes("Webarchive") ||
    //     newCategoryToPost.includes("maint")
    //   ) {
    //     randomCat = Math.floor(
    //       Math.random() * response.query.pages[pageId].categories.length
    //     );
    //     newCategoryToPost = response.query.pages[pageId].categories[randomCat].title;
    //   }
    //   newCategoryToPost = newCategoryToPost.replace(/Category:/g, "");
    //   console.log(newCategoryToPost);
    //     });
    // });
    </script>
</body>
</html>